{
  "format_version": "1.20.10",
  "minecraft:block": {
    "description": {
      "identifier": "nature:olive_door_top",
      "menu_category": {
        "category": "none"
      },
      "properties": {
        "nature:is_open": [false, true],
        "nature:direction": [0, 1, 2, 3]
      }
    },
    "components": {
      "minecraft:material_instances": {
        "*": {
          "texture": "olive_door_top",
          "render_method": "alpha_test",
          "face_dimming": true,
          "ambient_occlusion": false
        }
      },
      "minecraft:placement_filter": {
        "conditions": [
          {
            "allowed_faces": ["up"],
            "block_filter": [
              {
                "tags": "query.any_tag('nature_olive_door')"
              }
            ]
          }
        ]
      },
      "minecraft:destructible_by_mining": {
        "seconds_to_destroy": 0.5
      },
      "minecraft:on_player_destroyed": {
        "event": "nature:reset_bottom"
      },
      "minecraft:geometry": {
        "identifier": "geometry.door",
        "bone_visibility": {
          "closed": "query.block_state('nature:is_open') == false",
          "open": "query.block_state('nature:is_open') == true"
        }
      },
      "minecraft:loot": "loot_tables/blocks/olive_door.json",
      "minecraft:map_color": "#52221D",
      "minecraft:light_dampening": 10,
      "tag:nature_olive_door": {},
      "tag:door": {}
    },
    "permutations": [
      {
        "condition": "query.block_state('nature:direction') == 0",
        "components": {
          "minecraft:transformation": {
            "rotation": [0, 180, 0]
          }
        }
      },
      {
        "condition": "query.block_state('nature:direction') == 1",
        "components": {
          "minecraft:transformation": {
            "rotation": [0, 0, 0]
          }
        }
      },
      {
        "condition": "query.block_state('nature:direction') == 2",
        "components": {
          "minecraft:transformation": {
            "rotation": [0, 270, 0]
          }
        }
      },
      {
        "condition": "query.block_state('nature:direction') == 3",
        "components": {
          "minecraft:transformation": {
            "rotation": [0, 90, 0]
          }
        }
      },
      {
        "condition": "query.block_state('nature:is_open') == 0",
        "components": {
          "minecraft:on_interact": {
            "event": "nature:open_door"
          },
          "minecraft:collision_box": {
            "origin": [-8, 0, -8],
            "size": [16, 16, 3]
          },
          "minecraft:selection_box": {
            "origin": [-8, 0, -8],
            "size": [16, 16, 3]
          },
          "tag:nature:closed_olive_door": {}
        }
      },
      {
        "condition": "query.block_state('nature:is_open') == 1",
        "components": {
          "minecraft:on_interact": {
            "event": "nature:close_door"
          },
          "minecraft:collision_box": {
            "origin": [-8, 0, -8],
            "size": [3, 16, 16]
          },
          "minecraft:selection_box": {
            "origin": [-8, 0, -8],
            "size": [3, 16, 16]
          },
          "tag:nature:open_olive_door": {}
        }
      }
    ],
    "events": {
      "nature:set_lower_block": {
        "sequence": [
          {
            "condition": "query.block_state('nature:direction')==0&&query.block_state('nature:is_open')==false",
            "run_command": {
              "command": [
                "setblock ~~-1~ nature:olive_door_bottom [\"nature:direction\"=0, \"nature:is_open\"=false, \"nature:top_refresh\"=true]"
              ]
            }
          },
          {
            "condition": "query.block_state('nature:direction')==1&&query.block_state('nature:is_open')==false",
            "run_command": {
              "command": [
                "setblock ~~-1~ nature:olive_door_bottom [\"nature:direction\"=1, \"nature:is_open\"=false, \"nature:top_refresh\"=true]"
              ]
            }
          },
          {
            "condition": "query.block_state('nature:direction')==2&&query.block_state('nature:is_open')==false",
            "run_command": {
              "command": [
                "setblock ~~-1~ nature:olive_door_bottom [\"nature:direction\"=2, \"nature:is_open\"=false, \"nature:top_refresh\"=true]"
              ]
            }
          },
          {
            "condition": "query.block_state('nature:direction')==3&&query.block_state('nature:is_open')==false",
            "run_command": {
              "command": [
                "setblock ~~-1~ nature:olive_door_bottom [\"nature:direction\"=3, \"nature:is_open\"=false, \"nature:top_refresh\"=true]"
              ]
            }
          },
          {
            "condition": "query.block_state('nature:direction')==0&&query.block_state('nature:is_open')==true",
            "run_command": {
              "command": [
                "setblock ~~-1~ nature:olive_door_bottom [\"nature:direction\"=0, \"nature:is_open\"=true, \"nature:top_refresh\"=true]"
              ]
            }
          },
          {
            "condition": "query.block_state('nature:direction')==1&&query.block_state('nature:is_open')==true",
            "run_command": {
              "command": [
                "setblock ~~-1~ nature:olive_door_bottom [\"nature:direction\"=1, \"nature:is_open\"=true, \"nature:top_refresh\"=true]"
              ]
            }
          },
          {
            "condition": "query.block_state('nature:direction')==2&&query.block_state('nature:is_open')==true",
            "run_command": {
              "command": [
                "setblock ~~-1~ nature:olive_door_bottom [\"nature:direction\"=2, \"nature:is_open\"=true, \"nature:top_refresh\"=true]"
              ]
            }
          },
          {
            "condition": "query.block_state('nature:direction')==3&&query.block_state('nature:is_open')==true",
            "run_command": {
              "command": [
                "setblock ~~-1~ nature:olive_door_bottom [\"nature:direction\"=3, \"nature:is_open\"=true, \"nature:top_refresh\"=true]"
              ]
            }
          }
        ]
      },
      "nature:close_door": {
        "sequence": [
          {
            "run_command": {
              "command": ["playsound random.door_close @a ~ ~ ~"]
            }
          },
          {
            "set_block_state": {
              "nature:is_open": 0
            }
          },
          {
            "trigger": {
              "event": "nature:set_lower_block",
              "target": "self"
            }
          }
        ]
      },
      "nature:open_door": {
        "sequence": [
          {
            "run_command": {
              "command": ["playsound random.door_open @a ~ ~ ~"]
            }
          },
          {
            "set_block_state": {
              "nature:is_open": 1
            }
          },
          {
            "trigger": {
              "event": "nature:set_lower_block",
              "target": "self"
            }
          }
        ]
      },
      "nature:reset_bottom": {
        "sequence": [
          {
            "run_command": {
              "command": ["setblock ~~-1~ air"]
            }
          }
        ]
      }
    }
  }
}
